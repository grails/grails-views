<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<title>Grails Views</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Grails Views</h1>
<div class="details">
<span id="revnumber">version 3.2.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_json_views">2. JSON Views</a>
<ul class="sectlevel2">
<li><a href="#_introduction_2">2.1. Introduction</a></li>
<li><a href="#_version_history">2.2. Version History</a></li>
<li><a href="#_installation">2.3. Installation</a></li>
<li><a href="#_templates">2.4. Templates</a></li>
<li><a href="#_rendering_domain_classes">2.5. Rendering Domain Classes</a></li>
<li><a href="#_json_view_api">2.6. JSON View API</a></li>
<li><a href="#_model_naming">2.7. Model Naming</a></li>
<li><a href="#_content_negotiation">2.8. Content Negotiation</a></li>
<li><a href="#_hal_support">2.9. HAL Support</a></li>
<li><a href="#_json_api_support">2.10. JSON API Support</a></li>
<li><a href="#_the_jsontemplateengine">2.11. The JsonTemplateEngine</a></li>
<li><a href="#_static_compilation">2.12. Static Compilation</a></li>
<li><a href="#_testing">2.13. Testing</a></li>
<li><a href="#_plugin_support">2.14. Plugin Support</a></li>
<li><a href="#_configuration">2.15. Configuration</a></li>
<li><a href="#_custom_converters">2.16. Custom Converters</a></li>
<li><a href="#_intellij_support">2.17. IntelliJ Support</a></li>
<li><a href="#_debugging_views">2.18. Debugging Views</a></li>
</ul>
</li>
<li><a href="#_markup_views">3. Markup Views</a>
<ul class="sectlevel2">
<li><a href="#_introduction_3">3.1. Introduction</a></li>
<li><a href="#_installation_2">3.2. Installation</a></li>
<li><a href="#_markup_view_api">3.3. Markup View API</a></li>
<li><a href="#_configuration_2">3.4. Configuration</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Grails Views project provides additional view technologies to the Grails framework, including JSON and Markup views.</p>
</div>
<div class="paragraph">
<p>JSON views allow rendering of JSON responses using Groovy&#8217;s <a href="http://docs.groovy-lang.org/latest/html/gapi/groovy/json/StreamingJsonBuilder.html">StreamingJsonBuilder</a>.</p>
</div>
<div class="paragraph">
<p>Markup views allow rendering of XML responses using Groovy&#8217;s <a href="http://docs.groovy-lang.org/latest/html/gapi/groovy/text/markup/MarkupTemplateEngine.html">MarkupTemplateEngine</a>.</p>
</div>
<div class="paragraph">
<p>However, the core of the project is extensible for potentially any kind of view implementation that is based on a Groovy DSL. The following sections cover usage of Groovy JSON views.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_json_views">2. JSON Views</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2">2.1. Introduction</h3>
<div class="paragraph">
<p>JSON views are written in Groovy, end with the file extension <code>gson</code> and reside in the <code>grails-app/views</code> directory. They provide a DSL for producing output in the JSON format. A hello world example can be seen below:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/hello.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.message {
    hello "world"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above JSON view results in the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{"message":{ "hello":"world"}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>json</code> variable is an instance of <a href="http://docs.groovy-lang.org/latest/html/api/groovy/json/StreamingJsonBuilder.html">StreamingJsonBuilder</a>. See the <a href="http://docs.groovy-lang.org/latest/html/documentation/core-domain-specific-languages.html#_streamingjsonbuilder">documentation</a> in the Groovy user guide for more information on <code>StreamingJsonBuilder</code>.</p>
</div>
<div class="paragraph">
<p>More example usages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json(1,2,3) == "[1,2,3]"
json { name "Bob" } == '{"name":"Bob"}'
json([1,2,3]) { n it } == '[{"n":1},{"n":2},{"n":3}]'</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify a model to view in one of two ways. Either with a <code>model</code> block:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/hello.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String message
}
json.message {
    hello message
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or with the <code>@Field</code> transformation provided by Groovy:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/hello.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import groovy.transform.Field
@Field String message
json.message {
    hello message
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_version_history">2.2. Version History</h3>
<div class="paragraph">
<p>The current release is 3.2.0-SNAPSHOT. Below is a version history.</p>
</div>
<div class="paragraph">
<p>For later releases check the release notes at: <a href="https://github.com/grails/grails-views/releases" class="bare">https://github.com/grails/grails-views/releases</a></p>
</div>
<div class="paragraph">
<p><strong>2.0.2</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fix bug where incorrect JSON was generated when all values are null in the nested object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>2.0.1</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Optimized <code>compileGsonViews</code> performance and reduced IOPS as well by compiling in parallel threads.</p>
</li>
<li>
<p>Remove duplicate GSON classes from WAR.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>2.0.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Grails 4, Gradle 5.</p>
</li>
<li>
<p>Support for render embedded types with "includes".</p>
</li>
<li>
<p>Fixed StackOverflow when rendering bidirectional associations.</p>
</li>
<li>
<p>Allow augmenting model in JSON view.</p>
</li>
<li>
<p>Fixed bugs related to exclude version and error properties from a Map model.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>1.3.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>includes</code> support has changed in a way that may break existing use cases. Having <code>includes: ['captain', 'captain.name']]</code> previously excluded all other fields except for <code>captain.name</code>. The <code>captain</code> in the list was necessary for <code>captain.name</code> to function as expected. Now the <code>captain</code> entry will cause all fields in <code>captain</code> to be rendered. To restore the previous behavior, simply remove the <code>captain</code> entry.  <code>includes: ['captain', 'captain.name']</code> &#8594; <code>includes: ['captain.name]</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>1.2.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>JSON API support</p>
</li>
<li>
<p>Ability to register custom converters</p>
</li>
<li>
<p>New configuration options for date formatting and unicode escaping</p>
</li>
<li>
<p>New testing trait that integrates with the testing-support framework (1.2.5)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>1.1.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Global template support</p>
</li>
<li>
<p>Template inheritance</p>
</li>
<li>
<p>Global templates for GORM for MongoDB / GeoJSON</p>
</li>
<li>
<p>Support for easily testing JSON views with <code>JsonViewTest</code></p>
</li>
<li>
<p>Pagination support in HAL</p>
</li>
<li>
<p>Better Embedded support in HAL</p>
</li>
<li>
<p>Ability to access HTTP parameters and headers</p>
</li>
<li>
<p>Resource expansion with the <code>expand</code> parameter</p>
</li>
<li>
<p>Controller namespace support</p>
</li>
<li>
<p>Support for a default <code>/object/_object.gson</code> template</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>1.0.0</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Initial 1.0.0 GA Release</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_installation">2.3. Installation</h3>
<div class="paragraph">
<p>To activate JSON views, add the following dependency to the <code>dependencies</code> block of your <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile "org.grails.plugins:views-json:3.2.0-SNAPSHOT"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are also using MongoDB you may want to add the <code>views-json-templates</code> dependency too which includes support for GeoJSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile "org.grails.plugins:views-json-templates:3.2.0-SNAPSHOT"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable Gradle compilation of JSON views for production environment add the following to the <code>buildscript</code> <code>dependencies</code> block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">buildscript {
    ...
    dependencies {
        ...
        classpath "org.grails.plugins:views-gradle:3.2.0-SNAPSHOT"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then apply the <code>org.grails.plugins.views-json</code> Gradle plugin after any Grails core gradle plugins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">...
apply plugin: "org.grails.grails-web"
apply plugin: "org.grails.plugins.views-json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will add a <code>compileGsonViews</code> task to Gradle that is executed when producing a JAR or WAR file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_templates">2.4. Templates</h3>
<div class="sect3">
<h4 id="_template_basics">2.4.1. Template Basics</h4>
<div class="paragraph">
<p>You can define templates starting with underscore <code>_</code>. For example given the following template called <code>_person.gson</code>:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/_person.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json {
    name person.name
    age person.age
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can render the template with the <code>g.render</code> method:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json g.render(template:"person", model:[person:person])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above assumes the view is in the same directory as the template. If this is not the case you may need to use a relative URI to the template:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/family/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json g.render(template:"/person/person", model:[person:person])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_namespace">2.4.2. Template Namespace</h4>
<div class="paragraph">
<p>The previous example can be simplified using the template namespace:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json tmpl.person(person)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the name of the method call (<code>person</code> in this case) is used to dictate which template to render.</p>
</div>
<div class="paragraph">
<p>The argument to the template becomes the model. The name of the model variable is the same as the template name. If you wish to alter this you can pass a map instead:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json tmpl.person(individual:person)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example the model variable passed to the <code>_person.gson</code> template is called <code>individual</code>.</p>
</div>
<div class="paragraph">
<p>This technique may also be used when you want to render a template using a relative path:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json tmpl.'/person/person'(person:person)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The template namespace even accepts a collection (or any <code>Iterable</code> object):</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Person&gt; people = []
}
json tmpl.person(people)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case the output is a JSON array. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">    [{"name":"Fred",age:10},{"name":"Bob",age:12}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>When rendering an <code>Iterable</code>, you can also specify the model name:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Person&gt; people = []
}
json tmpl.person("owner", people)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>person</code> template would have a field defined: <code>Person owner</code></p>
</div>
<div class="paragraph">
<p>If you need additional data that will be static over each iteration of the template, you can also pass in a model:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Person&gt; people = []
}
json tmpl.person(people, [relationship: "Father"])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>person</code> template could have a field defined: <code>String relationship</code></p>
</div>
<div class="paragraph">
<p>By passing in a collection the plugin will iterate over each element on the collection and render the template as a JSON array. If you do not want this to happen then use the variation of the method that takes a map instead:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/person/show.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Person&gt; people = []
}
json tmpl.person(people:people)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_more_ways_to_render_templates">2.4.3. More Ways to Render Templates</h4>
<div class="paragraph">
<p>The <code>g.render</code> method is flexible, you can render templates in many forms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Family family
}
json {
    name family.father.name
    age family.father.age
    oldestChild g.render(template:"person", model:[person: family.children.max { Person p -&gt; p.age } ])
    children g.render(template:"person", collection: family.children, var:'person')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, most of these use cases are more concise with the template namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Family family
}
json {
    name family.father.name
    age family.father.age
    oldestChild tmpl.person( family.children.max { Person p -&gt; p.age } ] )
    children tmpl.person( family.children )
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_inheritance">2.4.4. Template Inheritance</h4>
<div class="paragraph">
<p>JSON templates can inherit from a parent template. For example consider the following parent template:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/_parent.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Object object
}
json {
    hal.links(object)
    version "1.0"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A child template can inherit from the above template by using the <code>inherits</code> method:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/views/_person.gson</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">inherits template:"parent"
model {
    Person person
}
json {
    name person.name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JSON from the parent and the child template will be combined so that the output is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json"> {
   "_links": {
     "self": {
       "href": "http://localhost:8080/person/1",
       "hreflang": "en",
       "type": "application/hal+json"
     }
   },
   "version": "1.0",
   "name": "Fred"
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The parent template&#8217;s model will be formulated from the child templates model and the super class name. For example if the model is <code>Person person</code> where <code>Person</code> extends from <code>Object</code> then the final model passed to the parent template will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">[person:person, object:person]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>Person</code> class extended from a class called <code>Mammal</code> then the model passed to the parent would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">[person:person, mammal:person]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This allows you to design your templates around object inheritance.</p>
</div>
<div class="paragraph">
<p>You can customize the model passed to the parent template using the <code>model</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">inherits template:"parent", model:[person:person]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rendering_domain_classes">2.5. Rendering Domain Classes</h3>
<div class="sect3">
<h4 id="_basics_of_domain_class_rendering">2.5.1. Basics of Domain Class Rendering</h4>
<div class="paragraph">
<p>Typically your model may involve one or many domain instances. JSON views provide a <code>render</code> method for rendering these.</p>
</div>
<div class="paragraph">
<p>For example given the following domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the following template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json g.render(book)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting output is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{"id":1,"title":"The Stand"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can customize the rendering by including or excluding properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book, [includes:['title']])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or by providing a closure to provide additional JSON output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book) {
    pages 1000
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or combine the two approaches:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book, [includes:['title']]) {
    pages 1000
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_deep_rendering_of_domain_classes">2.5.2. Deep Rendering of Domain Classes</h4>
<div class="paragraph">
<p>Typically the <code>g.render(..)</code> method will only render objects one level deep. In other words if you have a domain class such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
    Author author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting output will be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{"id":1,"title":"The Stand","author":{id:1}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you wish for the <code>author</code> to be included as part of the rendering, there are two requirements, first you must make sure the association is initialized.</p>
</div>
<div class="paragraph">
<p>If the <code>render</code> method encounters a proxy, it will not traverse into the relationship to avoid N+1 query performance problems.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The same applies to one-to-many collection associations. If the association has not been initialized the <code>render</code> method will not traverse through the collection!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So you must make sure your query uses a join:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.findByTitle("The Stand", [fetch:[author:"join"]])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Secondly when calling the <code>render</code> method you should pass the <code>deep</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book, [deep:true])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, to only expand a single association you can use the <code>expand</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book, [expand:['author']])</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
request parameters can also be used to expand associations (eg. <code>?expand=author</code>), if you do not want to allow this, then use <code>includes</code> or <code>excludes</code> to include only the properties you want.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, if you prefer to handle the rendering yourself you can do by excluding the property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book, [excludes:['author']]) {
    author {
        name book.author.name
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_domain_class_rendering_and_templates">2.5.3. Domain Class Rendering and Templates</h4>
<div class="paragraph">
<p>An alternative to the default behaviour of the <code>render</code> method is to rely on templates.</p>
</div>
<div class="paragraph">
<p>In other words if you create a <code>/author/_author.gson</code> template and then use the <code>g.render</code> method on an instance of <code>book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json g.render(book)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Whenever the <code>author</code> association is encountered the <code>g.render</code> method will automatically render the <code>/author/_author.gson</code> template instead.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_view_api">2.6. JSON View API</h3>
<div class="paragraph">
<p>All JSON views subclass the <a href="api/grails/plugin/json/view/JsonViewTemplate.html">JsonViewTemplate</a> class by default.</p>
</div>
<div class="paragraph">
<p>The <code>JsonViewTemplate</code> superclass implements the <a href="api/grails/plugin/json/view/api/JsonView.html">JsonView</a> trait which in turn extends the the <a href="api/grails/views/api/GrailsView.html">GrailsView</a> trait.</p>
</div>
<div class="paragraph">
<p>Thanks to these traits several methods and properties are available to JSON views that can be used to accomplish different tasks.</p>
</div>
<div class="sect3">
<h4 id="_creating_links">2.6.1. Creating Links</h4>
<div class="paragraph">
<p>Links can be generated using the <code>g.link(..)</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.person {
    name "bob"
    homepage g.link(controller:"person", id:"bob")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>g.link</code> method is similar to the equivalent tag in GSP and allows you to easily create links to other controllers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_altering_the_response_headers">2.6.2. Altering the Response Headers</h4>
<div class="paragraph">
<p>To customize content types and headers use the <code>response</code> object defined by the <a href="api/grails/views/api/HttpView.html">HttpView</a> trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">response.contentType "application/hal+json"
response.header "Token", "foo"
json.person {
    name "bob"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>HttpView</code> trait defines a variety of methods for inspecting the request and altering the response.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The methods available are only a subset of the methods available via the <code>HttpServletRequest</code> and <code>HttpServletResponse</code> objects, this is by design as view logic should be limited and logic performed in the controller instead.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_the_request">2.6.3. Accessing the Request</h4>
<div class="paragraph">
<p>Various aspects of the request can be accessed by the <code>request</code> object defined by the <a href="api/grails/views/api/HttpView.html">HttpView</a> trait:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.person {
 name "bob"
 userAgent request.getHeader('User-Agent')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters can be accessed via the <code>params</code> object which is an instance of <a href="api/grails/views/api/http/Parameters.html">Parameters</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.person {
 name "bob"
 first params.int('offset', 0)
 sort params.get('sort', 'name')
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_default_static_imports">2.6.4. Default Static Imports</h4>
<div class="paragraph">
<p>The following classes' static properties are imported by default:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.http.HttpStatus</code></p>
</li>
<li>
<p><code>org.springframework.http.HttpMethod</code></p>
</li>
<li>
<p><code>grails.web.http.HttpHeaders</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This means that you can use the <code>response</code> object to set the status using these constants, instead of hard coded numbers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">response.status NOT_FOUND</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or generate links using the appropriate HTTP method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">g.link(resource:"books", method:POST)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_i18n_locale_integration">2.6.5. I18n &amp; Locale Integration</h4>
<div class="paragraph">
<p>You can lookup i18n messages use the <code>g.message</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.error {
    description g.message(code:'default.error.message')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create locale specific views by appending the locale to view name. For example <code>person_de.gson</code> for German or <code>person.gson</code> for the default.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For more complex message lookups the <code>messageSource</code> property is an instance of the Spring <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/MessageSource.html">MessageSource</a> class.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_configuration">2.6.6. Accessing Configuration</h4>
<div class="paragraph">
<p>The application configuration is injected automatically into your json views. To access it, simply reference <code>config</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json {
    foo config.getProperty("bar", String, null)
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_miscellaneous_properties">2.6.7. Miscellaneous Properties</h4>
<div class="paragraph">
<p>Other properties are also available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controllerName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the current controller</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>actionName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the current controller action</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>controllerNamespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The namespace of the current controller</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_model_naming">2.7. Model Naming</h3>
<div class="paragraph">
<p>Grails Framework supports a convention for the model names in your JSON views. If the convention does not meet your needs, model variables can be explicitly defined.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Some model names are <em>reserved</em> since there are properties of the same name injected into the view:
<code>locale</code>, <code>response</code>, <code>request</code>, <code>page</code>, <code>controllerNamespace</code>, <code>controllerName</code>, <code>actionName</code>, <code>config</code>, <code>generator</code>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_explicit_model_naming">2.7.1. Explicit Model Naming</h4>
<div class="paragraph">
<p>Given a view:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String message
}
json.message {
    hello message
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the controller has to specify the name to be used in the view:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/HelloController.groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def index() {
    respond(message: "Hello World")
    //or [message: "Hello World"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using a template:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/_msg.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String message
}
json.message {
    hello message
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the view you can use the <code>tmpl</code> namespace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json {
    message tmpl.msg([message: message])
    // or g.render(template:'msg', model:[message: message])
    // or g.render(template:'msg', model: message, var:'message')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using collections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;String&gt; messages
}
json {
    messages tmpl.msg('message', messages)
    // or g.render(template:'msg', collection: messages, var: 'message')
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_model_by_convention">2.7.2. Model By Convention</h4>
<div class="sect4">
<h5 id="_property_type">Property Type</h5>
<div class="paragraph">
<p>When rendering a non iterable object, the property name of the type is used when a name is not specified.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String string
}
json.message {
    hello string
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The variable can be passed in directly to <code>respond</code>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/HelloController.groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def index() {
    respond("Hello World")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This also applies when rendering templates with <code>tmpl</code>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/_msg.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String string
}
json.message {
    hello string
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String someString
}
json tmpl.msg(someString)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a collection is rendered, the property name of the component type is appended with the property name of the collection type. The component type is based on the first item in the list.</p>
</div>
<div class="paragraph">
<p><code>List&lt;String&gt;</code>  &#8594; <code>stringList</code></p>
</div>
<div class="paragraph">
<p><code>Set&lt;String&gt;</code>  &#8594; <code>stringSet</code></p>
</div>
<div class="paragraph">
<p><code>Bag&lt;String&gt;</code>  &#8594; <code>stringCollection</code></p>
</div>
<div class="paragraph">
<p>If the collection is empty, <code>emptyCollection</code> will be used as the default model name. This is due to not being able to inspect the first object&#8217;s type.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String stringList
}
json {
    strings stringList
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The variable can be passed in directly to <code>respond</code>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/HelloController.groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def index() {
    respond(["Hello", "World"])
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The component+collection convention does not apply when rendering collections with <code>tmpl</code> inside a view.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_template_name">Template Name</h5>
<div class="paragraph">
<p>When using a template, unless specified, the model name is based on the template name.</p>
</div>
<div class="paragraph">
<p>Given the following template:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/_msg.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    String msg // or String string
}
json.message {
    hello msg
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To render a single message from another view using the template:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json.message tmpl.msg(message)</code></pre>
</div>
</div>
<div class="paragraph">
<p>To render a collection of messages from another view using the template:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/hello/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;String&gt; stringList
}
json {
    messages tmpl.msg(stringList)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In both cases the convention of the variable name matching the template name is used.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_content_negotiation">2.8. Content Negotiation</h3>
<div class="paragraph">
<p>GSON views integrate with Grails' content negotiation infrastructure. For example if you create two views called <code>grails-app/views/book/show/show.gsp</code> (for HTML) and <code>grails-app/views/book/show/show.gson</code> (for JSON), you can then define the following action:</p>
</div>
<div class="listingblock">
<div class="title"><code>grails-app/controllers/myapp/BookController.groovy</code></div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def show() {
    respond Book.get(params.id)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is that if you send a request to <code>/book/show</code> it will render <code>show.gsp</code> but if you send a request to <code>/book/show.json</code> it will render <code>show.gson</code>.</p>
</div>
<div class="paragraph">
<p>In addition, if the client sends a request with the <code>Accept</code> header containing <code>application/json</code> the <code>show.gson</code> view will be rendered.</p>
</div>
<div class="sect3">
<h4 id="_content_negotiation_and_domain_classes">2.8.1. Content Negotiation and Domain Classes</h4>
<div class="paragraph">
<p>Content negotiation also works nicely with domain classes, for example if you want to define a template to render any instance of the <code>Book</code> domain class you can create a <code>gson</code> file that matches the class name.</p>
</div>
<div class="paragraph">
<p>For example given a class called <code>demo.Book</code> you can create <code>grails-app/views/book/_book.gson</code> and whenever <code>respond</code> is called with an instance of <code>Book</code> Grails will render <code>_book.gson</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def show() {
    respond Book.get(params.id)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you define an <code>index</code> action that responds with a list of books:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def index() {
    respond Book.list()
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can create a corresponding <code>grails-app/views/book/index.gson</code> file that renders each book:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/book/index.gson</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">@Field List&lt;Book&gt; bookList

json tmpl.book(bookList)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When responding with a list of objects Grails automatically appends the suffix "List" to the model name, so in this case the model name is <code>bookList</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By calling the <code>tmpl.book(..)</code> method with the list of books the <code>grails-app/views/book/_book.gson</code> template will be rendered for each one and a JSON array returned.</p>
</div>
</div>
<div class="sect3">
<h4 id="_global_default_template">2.8.2. Global Default Template</h4>
<div class="paragraph">
<p>You can also define a <code>/object/_object</code> template that is rendered by default if no other template is found during content negotiation. To do this create a file called <code>/grails-app/views/object/_object.gson</code> where the name of the model is <code>object</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Object object
}
json g.render(object)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_content_negotiation_and_versioned_apis">2.8.3. Content Negotiation and Versioned APIs</h4>
<div class="paragraph">
<p>A typical use case when building REST APIs is the requirement to support different versions of the API. GSON views can be versioned by including the version in the name of the view.</p>
</div>
<div class="paragraph">
<p>Grails will then use the <code>ACCEPT-VERSION</code> header when resolving the view.</p>
</div>
<div class="paragraph">
<p>For example given a view called <code>/book/show.gson</code> if you wish to deprecate your previous API and create a version 2.0 API, you can rename the previous view <code>/book/show_v1.0.gson</code> and create a new <code>/book/show.gson</code> representing the new version of the API.</p>
</div>
<div class="paragraph">
<p>Then when the client sends a request with the <code>ACCEPT-VERSION</code> header containing <code>v1.0</code> the <code>/book/show_v1.0.gson</code> view will be rendered instead of <code>/book/show.gson</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_content_negotiation_and_view_resolving_strategy">2.8.4. Content Negotiation and View Resolving Strategy</h4>
<div class="paragraph">
<p>Grails Framework takes into account a number of factors when attempting to resolve the view including the content type, version and locale.</p>
</div>
<div class="paragraph">
<p>The paths searched are following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>view_name[_LOCALE][_ACCEPT_CONTENT_TYPE][_ACCEPT-VERSION].gson (Example: show_de_hal_v1.0.gson)</p>
</li>
<li>
<p>view_name[_LOCALE][_ACCEPT_CONTENT_TYPE].gson (Example: show_de_hal.gson)</p>
</li>
<li>
<p>view_name[_LOCALE][_ACCEPT-VERSION].gson (Example: show_de_v1.0.gson)</p>
</li>
<li>
<p>view_name[_LOCALE].gson (Example: show_de.gson)</p>
</li>
<li>
<p>view_name[_ACCEPT_CONTENT_TYPE][_ACCEPT-VERSION].gson (Example: show_hal_v1.0.gson)</p>
</li>
<li>
<p>view_name[_ACCEPT-VERSION][_ACCEPT_CONTENT_TYPE].gson (Example: show_v1.0_hal.gson)</p>
</li>
<li>
<p>view_name[_ACCEPT_CONTENT_TYPE].gson (Example: show_hal.gson)</p>
</li>
<li>
<p>view_name[_ACCEPT-VERSION].gson (Example: show_v1.0.gson)</p>
</li>
<li>
<p>view_name.gson (Example: show.gson)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The content type (defined by either the <code>ACCEPT</code> header or file extension in the URI) is taken into account to allow different formats for the same view.</p>
</div>
</div>
<div class="sect3">
<h4 id="mimeTypes">2.8.5. Content Negotiation and Custom Mime Types</h4>
<div class="paragraph">
<p>Some REST APIs use the notion of custom mime types to represent resources. Within Grails you can for example define custom mime types in <code>grails-app/conf/application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">grails:
    mime:
        types:
            all:      "*/*"
            book:     "application/vnd.books.org.book+json"
            bookList: "application/vnd.books.org.booklist+json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once these custom mime types have been defined you can then define a view such as <code>show.book.gson</code> for that particular mime type.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hal_support">2.9. HAL Support</h3>
<div class="paragraph">
<p><a href="http://stateless.co/hal_specification.html">HAL</a> is a standard format for representing JSON that has gained traction for its ability to represent links between resources and provide navigable APIs.</p>
</div>
<div class="paragraph">
<p>The JSON views plugin for Grails provides HAL support out-of-the-box. All JSON views have access to the <code>hal</code> instance which implements <a href="api/grails/plugin/json/view/api/HalViewHelper.html">HalViewHelper</a>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.links(book)
    hal.embedded {
        author( book.authors.first() ) { Author author -&gt;
            name author.name
        }
    }
    title book.title
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The call to <code>hal.links()</code> has to be the first element within the <code>json{}</code> closure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This produces the HAL output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{
    "_links": {
        "self": {
            "href": "http://localhost:8080/book/show/1",
            "hreflang": "en",
            "type": "application/hal+json"
        }
    },
    "_embedded": {
        "author": {
            "_links": {
                "self": {
                    "href": "http://localhost:8080/author/show/1",
                    "hreflang": "en",
                    "type": "application/hal+json"
                }
            },
            "name": "Stephen King"
        }
    },
    "title": "The Stand"
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_generating_hal_links">2.9.1. Generating HAL Links</h4>
<div class="paragraph">
<p>The above example uses the <code>hal.links(..)</code> method to render links for a domain resource and the <code>hal.embedded(..)</code> method to define any embedded objects that form part of the HAL response.</p>
</div>
<div class="paragraph">
<p>The <code>hal.links(..)</code> method will by default create a link to the resource, but you can define additional links by annotating the domain class with either <code>grails.rest.Linkable</code> or <code>grails.rest.Resource</code> and using the <code>link</code> method on the object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">book.link(rel:"publisher", href:"http://foo.com/books")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The link will then be included in the HAL output.</p>
</div>
<div class="paragraph">
<p>If you wish to be specific about which links to include you can do so by passing a map of objects to link to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.links(self:book, author: book.author)
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, if you prefer to define the HAL links yourself then you can do so by passing a closure to the <code>hal.links</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.links {
        self {
            href '...'
            hreflang 'en'
            type "application/hal+json"
        }
    }
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rendering_domain_classes_as_hal">2.9.2. Rendering Domain Classes as HAL</h4>
<div class="paragraph">
<p>If you prefer to let the plugin handle the rendering of your object you can use the <code>hal.render(..)</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json hal.render(book)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>hal.render</code> method works the same as the <code>g.render</code> method, accepting the same arguments, the difference being it will output HAL links for the object via <code>hal.links</code> and also output associations fetched via a join query for <code>hal.embedded</code>.</p>
</div>
<div class="paragraph">
<p>For example you can also customize the content of the generated HAL with a closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json hal.render(book) {
    pages 1000
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_embedded_association_and_hal">2.9.3. Embedded Association and HAL</h4>
<div class="paragraph">
<p>Generally, when using the <code>hal.render(..)</code> method, <code>_embedded</code> associations are only rendered for associations that have been initialized and eagerly fetched. This means that the following query will not render the <code>book.authors</code> association:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.get(params.id)</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, this query will render the <code>book.authors</code> association:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.get(params.id, [fetch:[authors:'eager']])</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is by design and to prevent unexpected performance degradation due to N+1 query loading. If you wish to force the <code>render</code> method to render <code>_embedded</code> associations for HAL you can do see using the <code>deep</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">json hal.render(book, [deep:true])</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can prevent HAL <code>_embedded</code> associations from being rendering using the <code>embedded:false</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json hal.render(book, [embedded:false])</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also render embedded associations without using the <code>hal.render(..)</code> method, by using the <code>hal.embedded(..)</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.embedded(book)
    title book.title
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Like the <code>hal.links(..)</code> method, the <code>hal.embedded(..)</code> method should come first, before any other attributes, in your JSON output
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also control which associations should be embedded by using a map argument instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.embedded(authors: book.authors)
    title book.title
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can inline the contents of the book without any associations using the <code>hal.inline(..)</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.embedded(authors: book.authors)
    hal.inline(book)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To customize the contents of the inlined JSON output use a closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.embedded(authors: book.authors)
    hal.inline(book) {
        pages 300
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You cannot include additional content after the call to <code>hal.inline(..)</code> as this will produce invalid JSON
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can combine <code>hal.embeddded(..)</code> and <code>hal.links(..)</code> to obtain exactly the links and the embedded content you want:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json {
    hal.links(self: book )
    hal.embedded(authors: book.authors)
    hal.inline(book) {
        pages 300
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_the_hal_content_type">2.9.4. Specifying the HAL Content Type</h4>
<div class="paragraph">
<p>The default HAL response content type is <code>application/hal+json</code>, however as discussed in the section on <a href="#json/contentNegotiation.adoc#mimeTypes">Custom Mime Type</a> you can define your own response content types to represent your resources.</p>
</div>
<div class="paragraph">
<p>For example given the following configuration in <code>grails-app/conf/application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">grails:
    mime:
        types:
            all:      "*/*"
            book:     "application/vnd.books.org.book+json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set the HAL content type to an explicit content type or one of the named content types defined in <code>grails.mime.types</code> in <code>application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
hal.type("book")
json {
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hal_pagination">2.9.5. HAL Pagination</h4>
<div class="paragraph">
<p>The JSON views plugin for Grails provides navigable pagination support.
Like the GSP <code>&lt;g:paginate&gt;</code> tag, the parameters include: <code>total</code>, <code>max</code>, <code>offset</code>, <code>sort</code> and <code>order</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Iterable&lt;Book&gt; bookList
    Integer bookCount
    Integer max // optional, defaults to 10
    Integer offset // optional, defaults to 0
    String sort // optional
    String order // optional
}
json {
    hal.paginate(Book, bookCount, max, offset, sort, order)
    ...
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Similar to <code>hal.links()</code> the <code>hal.paginate()</code> has to be the first element within the <code>json{}</code> closure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When accessing <code>http://localhost:8080/book?offset=10</code> this produces the navigable output like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{
  "_links": {
    "self": {
      "href": "http://localhost:8080/book/index?offset=10&amp;max=10",
      "hreflang": "en_US",
      "type": "application/hal+json"
    },
    "first": {
      "href": "http://localhost:8080/book/index?offset=0&amp;max=10",
      "hreflang": "en_US"
    },
    "prev": {
      "href": "http://localhost:8080/book/index?offset=0&amp;max=10",
      "hreflang": "en_US"
    },
    "next": {
      "href": "http://localhost:8080/book/index?offset=20&amp;max=10",
      "hreflang": "en_US"
    },
    "last": {
      "href": "http://localhost:8080/book/index?offset=40&amp;max=10",
      "hreflang": "en_US"
    }
  },
  ...
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If there aren&#8217;t enough results to paginate the navigation links will not appear, Likewise, the <code>prev</code> and <code>next</code> links are only present when there is a previous or next page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have other links that you want to include along with the pagination links then you can use the <code>hal.links(..)</code> method with pagination arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Author author
    Iterable&lt;Book&gt; bookList
    Integer bookCount
}
json {
    // the model, type to paginate, and the total count
    hal.links([author:author], Book, bookCount)
    ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_api_support">2.10. JSON API Support</h3>
<div class="paragraph">
<p><a href="http://jsonapi.org/">JSON API</a> is a standard format for representing JSON.</p>
</div>
<div class="paragraph">
<p>The JSON views plugin for Grails provides JSON API support out-of-the-box. All JSON views have access to the <code>jsonapi</code> instance which implements <a href="api/grails/plugin/json/view/api/JsonApiViewHelper.html">JsonApiViewHelper</a>.</p>
</div>
<div class="paragraph">
<p>Grails views makes a best effort to conform to the JSON API standard, however that only applies to the format of the data. The specification makes many assertions about response codes, url conventions, and other server related concepts that are overreaching.</p>
</div>
<div class="paragraph">
<p>The JSON API support in Grails also only applies to domain classes. Because the specification relies on concepts of relationships and identifiers, there is no clear way to determine how those concepts would apply to conventional Groovy classes. As a result, normal Groovy classes are not supported.</p>
</div>
<div class="paragraph">
<p>The simplest example of using JSON API simply passes a domain class to the <code>render</code> method of the <code>jsonapi</code> object.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json jsonapi.render(book)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example where <code>Book</code> looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
    Author author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is what an example <code>Book</code> instance rendered with JSON API might look like.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "data": {
    "type": "book",
    "id": "3",
    "attributes": {
      "title": "The Return of the King"
    },
    "relationships": {
      "author": {
        "links": {
          "self": "/author/9"
        },
        "data": {
          "type": "author",
          "id": "9"
        }
      }
    }
  },
  "links": {
    "self": "http://localhost:8080/book/3"
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_json_api_object">2.10.1. JSON API Object</h4>
<div class="paragraph">
<p>To include the <a href="http://jsonapi.org/format/#document-jsonapi-object">JSON API Object</a> in the response, include a <code>jsonApiObject</code> argument to the <code>render</code> method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json jsonapi.render(book, [jsonApiObject: true])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response will contain <code>"jsonapi":{"version":"1.0"}</code> as the first key in the resulting object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_meta_object">2.10.2. Meta Object</h4>
<div class="paragraph">
<p>To add <a href="http://jsonapi.org/format/#document-meta">metadata</a> to your response, the <code>meta</code> argument can be passed to render with the value being the object that should be rendered. If this functionality is used in addition to <code>jsonApiObject: true</code>, the metadata will be rendered as the "meta" property of the "jsonapi" object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json jsonapi.render(book, [meta: [name: "Metadata Information"]])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response will contain <code>"meta":{"name":"Metadata Information"}</code> as the first key in the resulting object.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rendering_errors">2.10.3. Rendering Errors</h4>
<div class="paragraph">
<p>The JSON API specification has <a href="http://jsonapi.org/format/#errors">instructions on how to render errors</a>. In the case of the Grails implementation, this applies to both exceptions and validation errors.</p>
</div>
<div class="sect4">
<h5 id="_exceptions">Exceptions</h5>
<div class="paragraph">
<p>If an exception is passed to the <code>render</code> method, it will be rendered within the specification.</p>
</div>
<div class="paragraph">
<p>In the example of an exception <code>new RuntimeException("oops!")</code>, the following will be rendered:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "errors": [
    {
      "status": 500,
      "title": "java.lang.RuntimeException",
      "detail": "oops!",
      "source": {
        "stacktrace": [
          //An array of information relating to the stacktrace
        ]
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validation_errors">Validation Errors</h5>
<div class="paragraph">
<p>In the case of validation errors, the response will look like the following when a <code>name</code> property fails the blank constraint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "errors": [
    {
      "code": "blank",
      "detail": "Property [name] of class [class com.foo.Bar] cannot be blank",
      "source": {
        "object": "com.foo.Bar",
        "field": "name",
        "rejectedValue": "",
        "bindingError": false
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_links">2.10.4. Links</h4>
<div class="paragraph">
<p>In general, links for relationships will be provided when the relationship has a value.</p>
</div>
<div class="paragraph">
<p>Example output for a has one relationship where the value is null:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">"captain": {
  "data": null
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And when the value is not null:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">"author": {
  "links": {
    "self": "/author/9"
  },
  "data": {
    "type": "author",
    "id": "9"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Currently links are not supported in the case of to many relationships.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pagination">2.10.5. Pagination</h4>
<div class="paragraph">
<p>The JSON API specification has a section which explains <a href="http://jsonapi.org/format/#fetching-pagination">pagination</a>. The Grails implementation follows that specification as it is written.</p>
</div>
<div class="paragraph">
<p>To enable pagination links in your output you must be rendering a collection and also include some arguments in addition to the collection being rendered. There are two required arguments: total and resource. The default offset is 0 and max is 10.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Book&gt; books
    Integer bookTotal
}
json jsonapi.render(books, [pagination: [total: bookTotal, resource: Book]])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example links output if <code>bookTotal == 20</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">"links": {
  "self": "/books",
  "first": "http://localhost:8080/books?offset=0&amp;max=10",
  "next": "http://localhost:8080/books?offset=10&amp;max=10",
  "last": "http://localhost:8080/books?offset=10&amp;max=10"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default the values for <code>offset</code>, <code>sort</code>, <code>max</code>, and <code>order</code> will come from the parameters with the same names. You can override their values by passing the corresponding argument in the pagination Map.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    List&lt;Book&gt; books
    Integer bookTotal
}
json jsonapi.render(books, [pagination: [total: bookTotal, resource: Book, max: 20, sort: params.myCustomSortArgument]])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associations">2.10.6. Associations</h4>
<div class="paragraph">
<p>The JSON API specification details how relationships should be rendered. The first way is through a relationships object described <a href="http://jsonapi.org/format/#document-resource-object-relationships">here</a>. By default that is now relationships will be rendered in json views.</p>
</div>
<div class="paragraph">
<p>If you do not wish to render the relationships at all, the <code>associations</code> argument can be passed to <code>render</code> with the value of false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json jsonapi.render(book, [associations: false])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The specification also has a section that describes <a href="http://jsonapi.org/format/#document-compound-documents">compound documents</a>. If you want one or more of your relationships to be rendered in that manner, you can include the <code>expand</code> argument.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
json jsonapi.render(book, [expand: "author"]) //can also be a list of strings</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_includes_excludes">2.10.7. Includes / Excludes</h4>
<div class="paragraph">
<p>The JSON API implementation in Grails supports the same includes and excludes support as normal json views. Please see the section on <a href="rendering.html">rendering</a> for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_identifier_rendering">2.10.8. Identifier Rendering</h4>
<div class="paragraph">
<p>Grails provides a way to customize the rendering of your domain class identifiers. To override the default behavior, register a bean that implements <a href="api/grails/plugin/json/view/api/jsonapi/JsonApiIdRenderStrategy.html">JsonApiIdRenderStrategy</a>.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/conf/spring/resources.groovy</div>
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">beans = {
    jsonApiIdRenderStrategy(MyCustomImplementation)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_jsontemplateengine">2.11. The JsonTemplateEngine</h3>
<div class="paragraph">
<p>The JSON Views plugin registers a bean called <code>jsonTemplateEngine</code> of type <a href="api/grails/plugin/json/view/JsonViewTemplateEngine.html">JsonViewTemplateEngine</a>.</p>
</div>
<div class="paragraph">
<p>This class is a regular Groovy <a href="http://docs.groovy-lang.org/latest/html/documentation/template-engines.html">TemplateEngine</a>, and you can use the engine to render JSON views outside the scope of an HTTP request.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">@Autowired
JsonViewTemplateEngine templateEngine
void myMethod() {
	Template t = templateEngine.resolveTemplate('/book/show')
	def writable = t.make(book: new Book(title:"The Stand"))
	def sw = new StringWriter()
	writable.writeTo( sw )
	...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_static_compilation">2.12. Static Compilation</h3>
<div class="paragraph">
<p>JSON views are statically compiled. You can disable static compilation if you prefer by setting <code>grails.views.json.compileStatic</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            compileStatic: false</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you disable static compilation rendering performance will suffer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For model variables you need to declare the types otherwise you will get a compilation error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Person person
}
json {
    name person.name
    age person.age
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing">2.13. Testing</h3>
<div class="paragraph">
<p>Although generally testing can be done using functional tests via an HTTP client, the JSON views plugin also provides a trait which helps in writing either unit or integration tests.</p>
</div>
<div class="paragraph">
<p>To use the trait import the <code>grails.plugin.json.view.test.JsonViewTest</code> class and apply it to any Spock or JUnit test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import grails.plugin.json.view.test.*
import spock.lang.Specification
class MySpec extends Specification implements JsonViewTest {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The trait provides a number of different <code>render</code> method implementations that can either render a JSON view found in <code>grails-app/views</code> or render an inline String. For example to render an inline template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">void "Test render a raw GSON view"() {
    when:"A gson view is rendered"
    JsonRenderResult result = render '''
        model {
            String person
        }
        json.person {
            name person
        }
''', [person:"bob"] <i class="conum" data-value="1"></i><b>(1)</b>

    then:"The json is correct"
    result.json.person.name == 'bob' <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the <code>render</code> method to return a <code>JsonRenderResult</code> passing in a String that is the inline template and a map that is the model</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assert the parsed JSON, represented by the <code>json</code> property, is correct</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To render an existing view or template use named arguments to specify an absolute path to either a template or a view:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">when:"A gson view is rendered"
def result = render(template: "/path/to/template", model:[age:10])

then:"The json is correct"
result.json.name == 'Fred'
result.json.age == 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are writing a unit test, and the model involves a domain class, you may need to add the domain class to the <code>mappingContext</code> object in order for it to be rendered correctly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">when:"A gson view is rendered for a domain class"
mappingContext.addPersistentEntity(MyDomain)
def result = render(template: "/path/to/template", model:[myDomain:MyDomain])

then:"The json is correct"
result.json.name == 'Fred'
result.json.age == 10</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Links generated by json views in a unit test may not match what they would normally generate in the standard environment. To fully test links, use a functional test.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_new_testing_framework">2.13.1. New Testing Framework</h4>
<div class="paragraph">
<p>Since the release of json views, a new testing framework was released for Grails. A new trait has been developed that works with the new testing framework that is designed to replace the existing trait. The existing trait will be left as is for backwards compatibility.</p>
</div>
<div class="paragraph">
<p>The new trait works exactly the same way as the old one, however since the new trait is designed to work with the new framework, there are several benefits you can take advantage of. The first is configuration. In the old trait the application configuration was not included in the template engine, which had the potential to produce incorrect results. Other benefits include extensibility and features like <code>@OnceBefore</code>.</p>
</div>
<div class="paragraph">
<p>To get started, add the <code>org.grails:views-json-testing-support:{version}</code> dependency to your project and implement the <a href="api/grails/views/json/test/JsonViewUnitTest.html">JsonViewUnitTest</a> trait in your test instead of <code>JsonViewTest</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The new testing trait, like the testing framework, requires Spock.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plugin_support">2.14. Plugin Support</h3>
<div class="paragraph">
<p>Grails plugins as well as standard Gradle Java/Groovy projects can provide json views to your application.</p>
</div>
<div class="sect3">
<h4 id="_grails_plugins">2.14.1. Grails Plugins</h4>
<div class="paragraph">
<p>Since JSON views are compiled all of a plugin&#8217;s views and templates are available for use in your applications.</p>
</div>
<div class="paragraph">
<p>The view resolution will look through all of the application&#8217;s configured plugins for views that match a particular name. By default, the views a plugin supplies should be stored in <code>grails-app/views</code>, just like applications.</p>
</div>
</div>
<div class="sect3">
<h4 id="_basic_libraries">2.14.2. Basic Libraries</h4>
<div class="paragraph">
<p>The most common use case to provide views in a standard library is to provide global templates. Global templates are templates designed to render a given class as JSON. In order to provide views in a standard Gradle project, you should configure your own view compilation task.</p>
</div>
<div class="paragraph">
<p>Below is an example Gradle build that adds a <code>compileViews</code> task for templates located into <code>src/main/gson</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">buildscript {
    repositories {
        maven { url "https://repo.grails.org/grails/core" }
    }
    dependencies {
        classpath "org.grails.plugins:views-gradle:3.2.0-SNAPSHOT"
    }
}

import grails.views.gradle.json.*

apply plugin:"java"

repositories {
    maven { url "https://repo.grails.org/grails/core" }
}

dependencies {
    compile "org.grails.plugins:views-json:3.2.0-SNAPSHOT"
    compileOnly "org.grails:grails-plugin-rest:3.1.7"
    compileOnly "javax.servlet:javax.servlet-api:4.0.1"
}

task( compileViews, type:JsonViewCompilerTask ) {
    source = project.file('src/main/gson')
    destinationDir = project.file('build/classes/main')
    packageName = ""
    classpath = configurations.compileClasspath + configurations.runtimeClasspath
}
classes.dependsOn compileViews</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this is in place any applications that includes this library will have access to the templates provided.</p>
</div>
<div class="paragraph">
<p>For example if you want to render all instances of type <code>foo.bar.Birthday</code> create a template called <code>src/main/gson/foo/bar/_birthday.gson</code> then compile the template and place the JAR on the classpath of your application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See the <a href="https://github.com/grails/grails-views/tree/master/json-templates/src/templates/grails/mongodb/geo">GeoJSON templates</a> for MongoDB for example of how it provides global templates for Mongo specific classes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_customizing_the_compile_task">2.14.3. Customizing the Compile Task</h4>
<div class="paragraph">
<p>Unless otherwise configured, the project name of the plugin (the gradle <code>project.name</code>) is used as the <code>packageName</code> when compiling JSON views.</p>
</div>
<div class="paragraph">
<p>In Gradle <code>project.name</code> is generally calculated from the current directory. That means that if there is mismatch between the current directory and your plugin name view resolution from a plugin could fail.</p>
</div>
<div class="paragraph">
<p>For example consider a plugin named <code>FooBarGrailsPlugin</code>, in this case Grails will search for views that match the plugin name <code>foo-bar</code>. However, if the directory where the plugin is located is called <code>fooBar</code> instead of <code>foo-bar</code> then view resolution will fail and the view will not be found when the plugin is installed into an application.</p>
</div>
<div class="paragraph">
<p>To resolve this issue you can customize the <code>compileGsonViews</code> task in the plugin&#8217;s <code>build.gradle</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compileGsonViews {
    packageName = "foo-bar"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By setting the <code>packageName</code> property to correctly match the convention of the plugin named (<code>FooBarGrailsPlugin</code> maps to <code>foo-bar</code>) view resolution will succeed.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration">2.15. Configuration</h3>
<div class="paragraph">
<p>JSON views configuration can be altered within <code>grails-app/conf/application.yml</code>. Any of the properties within the <a href="api/grails/plugin/json/view/JsonViewConfiguration.html">JsonViewConfiguration</a> interface can be set. The json view configuration extends <a href="api/grails/views/GenericViewConfiguration.html">GenericViewConfiguration</a>, therefore any properties in that interface can be set as well.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>For example:</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            compileStatic: true
            cache: true
            ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can register a new <code>JsonViewConfiguration</code> bean using the bean name <code>jsonViewConfiguration</code> in <code>grails-app/conf/resources.groovy</code>.</p>
</div>
<div class="paragraph">
<p>The same settings in <code>grails-app/conf/application.yml</code> will also be used by the Gradle plugin for production compilation.</p>
</div>
<div class="paragraph">
<p>The Gradle plugin compiles views using a forked compiler. You can configure the forked compilation task in Gradle as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compileGsonViews {
    compileOptions.forkOptions.memoryMaximumSize = '512mb'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the API for <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/compile/GroovyForkOptions.html">GroovyForkOptions</a> for more information.</p>
</div>
<div class="sect3">
<h4 id="_changing_the_view_base_class">2.15.1. Changing the view base class</h4>
<div class="paragraph">
<p>All JSON views subclass the <a href="api/grails/plugin/json/view/JsonViewTemplate.html">JsonViewTemplate</a> class by default.</p>
</div>
<div class="paragraph">
<p>You can however change the subclass (which should be a subclass of <code>JsonViewTemplate</code>) using configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            compileStatic: true
            baseTemplateClass: com.example.MyCustomJsonViewTemplate</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_new_helper_methods_via_traits">2.15.2. Adding New Helper Methods via Traits</h4>
<div class="paragraph">
<p>Alternatively, rather than modifying the base class, you can instead just add new methods via traits.</p>
</div>
<div class="paragraph">
<p>For example the <a href="api/grails/views/api/HttpView.html">HttpView</a> uses the <code>Enhances</code> annotation to add the <code>page</code> object to all views:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">import grails.artefact.Enhances
import grails.views.Views

@Enhances(Views.TYPE)
trait HttpView {

    /**
     * @return The response object
     */
    Response response
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is all JSON views have a <code>response</code> object that can be used to control the HTTP response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">response.header "Token", "foo"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The trait cannot be defined in the same project as you are compilation as it needs to be on the classpath of the project you are compiling. You will need to create a Grails plugin and use a multi-project build in this scenario.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_default_mime_types">2.15.3. Default Mime Types</h4>
<div class="paragraph">
<p>The mime types that will be accepted by default for JSON view rendering is configurable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            mimeTypes:
              - application/json
              - application/hal+json</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_unicode_escaping">2.15.4. Unicode Escaping</h4>
<div class="paragraph">
<p>By default, unicode characters will not be escaped. If you would like unicode characters to be escaped in your output, set the following configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            generator:
                escapeUnicode: true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_default_date_format">2.15.5. Default Date Format</h4>
<div class="paragraph">
<p>The default format for <code>java.util.Date</code> can be configured.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            generator:
                dateFormat: "yyyy-MM-dd'T'HH:mm:ss'Z'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, the default locale can also be specified.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            generator:
                locale: "en/US"</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_default_time_zone">2.15.6. Default Time Zone</h4>
<div class="paragraph">
<p>The default time zone can be configured. The value here will be passed to <code>TimeZone.getTimeZone(...)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        json:
            generator:
                timeZone: "GMT"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_converters">2.16. Custom Converters</h3>
<div class="paragraph">
<p>It is possible to register custom converters to change how a given class is rendered with json views. To do so, create a class that implements <a href="api/grails/plugin/json/builder/JsonGenerator.Converter.html">Converter</a>. Then you must register the class in <code>src/main/resources/META-INF/services/grails.plugin.json.builder.JsonGenerator$Converter</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">package foo

class MyConverter implements JsonGenerator.Converter {

    @Override
    boolean handles(Class&lt;?&gt; type) {
        CustomClass.isAssignableFrom(type)
    }

    @Override
    Object convert(Object value, String key) {
        ((CustomClass)value).name
    }
}


class CustomClass {
    String name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because plugins could potentially provide converters, you can also determine the order by implementing the <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/Ordered.html">Ordered</a> interface in your converter.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/META-INF/services/grails.plugin.json.builder.JsonGenerator$Converter</div>
<div class="content">
<pre class="highlight"><code>foo.MyCustomConverter</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have multiple classes to register, put each one on it&#8217;s own line
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_intellij_support">2.17. IntelliJ Support</h3>
<div class="paragraph">
<p>When opening <code>.gson</code> files in Intellij they should be opened with the regular Groovy editor.</p>
</div>
<div class="paragraph">
<p>The plugin includes an <a href="https://github.com/grails/grails-views/blob/master/json/src/main/resources/dsdl/gson.gdsl">IntelliJ GDSL file</a> that provides code completion when using IntelliJ IDEA.</p>
</div>
<div class="paragraph">
<p><a href="https://confluence.jetbrains.com/display/GRVY/Scripting+IDE+for+DSL+awareness">Intellij GDSL</a> is a way to describe the available methods and properties so that code completion is available to the developer when opening <code>.gson</code> files.</p>
</div>
<div class="paragraph">
<p>The GDSL file is generally kept up-to-date with the codebase, however if any variation is spotted please <a href="https://github.com/grails/grails-views/issues">raise an issue</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_debugging_views">2.18. Debugging Views</h3>
<div class="paragraph">
<p>Generally views should be kept simple and if you arrive to the point where you need to debug a view you probably have too much logic in the view that would be better off handled by the controller prior to supplying the model.</p>
</div>
<div class="paragraph">
<p>Nevertheless here are a few view debugging tips to help identify problems in the view.</p>
</div>
<div class="sect3">
<h4 id="_introspecting_the_model">2.18.1. Introspecting the Model</h4>
<div class="paragraph">
<p>Every JSON view is a Groovy script and like any Groovy script the model is defined in a <code>binding</code> variable. Therefore you can easily find out the model at any time by either logging or printing the binding variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Book book
}
// use the log variable
log.debug "Model is $binding.variables"
// use system out
System.out.println "Model is $binding.variables"
json g.render(book)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you using the <code>log</code> variable then you will need to enabling logging for the <code>grails.views</code> package in <code>grails-app/conf/logback.groovy</code>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_a_debugger">2.18.2. Connecting a Debugger</h4>
<div class="paragraph">
<p>Some IDEs like Intellij IDE allow you to set break points and step debug within the view itself. As mentioned previously you shouldn&#8217;t arrive to this point and if you do you have too much logic in your view, but if you do need it the feature is there.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_markup_views">3. Markup Views</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_3">3.1. Introduction</h3>
<div class="paragraph">
<p>Markup Views are written in Groovy, end with the file extension <code>gml</code> and reside in the <code>grails-app/views</code> directory.</p>
</div>
<div class="paragraph">
<p>The Markup Views plugin uses Groovy&#8217;s <a href="http://docs.groovy-lang.org/docs/latest/html/documentation/template-engines.html#_the_markuptemplateengine">MarkupTemplateEngine</a> and you can mostly use the <a href="http://docs.groovy-lang.org/docs/latest/html/documentation/template-engines.html#_the_markuptemplateengine">Groovy user guide</a> as a reference for the syntax.</p>
</div>
<div class="paragraph">
<p>Example Markup View:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">model {
    Iterable&lt;Map&gt; cars
}
xmlDeclaration()
cars {
    cars.each {
        car(make: it.make, model: it.model)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces the following output given a model such as <code>[cars:[[make:"Audi", model:"A5"]]]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version='1.0'?&gt;
&lt;cars&gt;&lt;car make='Audi' model='A5'/&gt;&lt;/cars&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For further examples see Groovy&#8217;s <a href="http://docs.groovy-lang.org/docs/latest/html/documentation/template-engines.html#_the_markuptemplateengine">MarkupTemplateEngine</a> documentation.</p>
</div>
<div class="paragraph">
<p>All Markup views subclass the <a href="api/grails/plugin/markup/view/MarkupViewTemplate.html">MarkupViewTemplate</a> class by default.</p>
</div>
<div class="paragraph">
<p>The <code>MarkupViewTemplate</code> superclass implements the <a href="api/grails/plugin/markup/view/api/MarkupView.html">MarkupView</a> trait which in turn extends the the <a href="api/grails/views/api/GrailsView.html">GrailsView</a> trait.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installation_2">3.2. Installation</h3>
<div class="paragraph">
<p>To activate Markup views, add the following dependency to the <code>dependencies</code> block of your <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile "org.grails.plugins:views-markup:3.2.0-SNAPSHOT"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable Gradle compilation of Markup views for production environment add the following to the <code>buildscript</code> <code>dependencies</code> block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">buildscript {
    ...
    dependencies {
        ...
        classpath "org.grails.plugins:views-gradle:3.2.0-SNAPSHOT"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then apply the <code>org.grails.plugins.views-markup</code> Gradle plugin after any Grails core gradle plugins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">...
apply plugin: "org.grails.grails-web"
apply plugin: "org.grails.plugins.views-markup"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will add a <code>compileMarkupViews</code> task to Gradle that is executed when producing a JAR or WAR file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_markup_view_api">3.3. Markup View API</h3>
<div class="paragraph">
<p>All Markup views subclass the <a href="api/grails/plugin/markup/view/MarkupViewTemplate.html">MarkupViewTemplate</a> class by default.</p>
</div>
<div class="paragraph">
<p>The <code>MarkupViewTemplate</code> superclass implements the <a href="api/grails/plugin/markup/view/api/MarkupView.html">MarkupView</a> trait which in turn extends the the <a href="api/grails/views/api/GrailsView.html">GrailsView</a> trait.</p>
</div>
<div class="paragraph">
<p>Much of the API is shared between JSON and Markup views. However, one difference compared to JSON views is that you must use <code>this</code> as a prefix when refering to properties from the parent class. For example to generate links this will produce a compilation error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">cars {
   cars.each {
       car(make: it.make, href: g.link(controller:'car'))
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, the following works fine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">cars {
   cars.each {
       car(make: it.make, href: this.g.link(controller:'car'))
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the <code>this</code> prefix when refering to <code>this.g.link(..)</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_2">3.4. Configuration</h3>
<div class="paragraph">
<p>Markup views configuration can be altered with <code>grails-app/conf/application.yml</code>. Any of the properties within the <a href="api/grails/plugin/markup/view/MarkupViewConfiguration.html">MarkupViewConfiguration</a> class and Groovy&#8217;s <a href="http://docs.groovy-lang.org/latest/html/api/groovy/text/markup/TemplateConfiguration.html">TemplateConfiguration</a> class can be set.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">grails:
    views:
        markup:
            compileStatic: true
            cacheTemplates: true
            autoIndent: true
            ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can register a new <code>MarkupViewConfiguration</code> bean using the bean name <code>markupViewConfiguration</code> in <code>grails-app/conf/spring/resources.groovy</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.2.0-SNAPSHOT<br>
Last updated 2024-03-14 18:18:36 UTC
</div>
</div>
</body>
</html>